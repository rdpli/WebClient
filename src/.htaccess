RewriteEngine On
DirectorySlash Off

RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [NC,L]

RewriteRule ^settings.* /settings/index.html [NC,L]
RewriteRule ^contacts.* /contacts/index.html [NC,L]
RewriteRule ^calendar.* /calendar/index.html [NC,L]
RewriteRule . /index.html [NC,L]

<Files ~ "(index.html|version.json)">
    FileETag None
    Header unset ETag
    Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
</Files>

<IfModule mod_mime.c>
  AddType application/font-woff2 .woff2
</IfModule>

<IfModule mod_deflate.c>
  AddOutputFilter INCLUDES;DEFLATE svg
</IfModule>
