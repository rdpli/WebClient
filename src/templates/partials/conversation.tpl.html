<section class="conversation-container">
    <header id="conversationHeader" class="conversationHeader-header relative ">
        <div class="flex flex-nowrap">
            <h1 class="flex-item-fluid cut mb0">
                <span ng-if="conversation.NumMessages > 1">({{ conversation.NumMessages }})</span>
                <span>{{ conversation.Subject | unescape }}</span>
            </h1>
            <div
                class="inline-flex flex-items-center flex-nowrap flex-justify-end conversationHeader-about"
                ng-if="conversation">

                <div class="labels message-summary-labels">
                    <labels-element
                        ng-if="!isMobile"
                        data-button="remove"
                        data-element="conversation"
                        class="message-summary-labels-list flex-nowrap"></labels-element>
                </div>

                <pt-star
                    data-model="conversation"
                    class="singleStar ml0-5 flex-item-noshrink"
                    data-pt-star-type="conversation"></pt-star>
            </div>

        </div>
        <div ng-if="isMobile">
            <labels-element
                data-button="remove"
                data-element="conversation"
                class="message-summary-labels-list flex-nowrap "></labels-element>
        </div>

        <div ng-hide="'secured.search.**' | includedByState" class="containsMessage flex flex-column">
            <p ng-if="showNotifier('trash')" class="bordered-container flex pt0-5 pb0-5 pl1 pr1">
                <span ng-show="inTrash === false" translate translate-context="Info">This conversation contains trashed messages.</span>
                <span ng-show="inTrash === true" translate translate-context="Info">This conversation contains non-trashed messages.</span>
                <button type="button" class="link ml0-5" ng-click="toggleOption('showTrashed')" ng-show="showTrashed === false && inTrash === false" translate translate-context="Action">Show trashed messages</button>
                <button type="button" class="link ml0-5" ng-click="toggleOption('showNonTrashed')" ng-show="showNonTrashed === false && inTrash === true" translate translate-context="Action">Show non-trashed messages</button>
                <button type="button" class="link ml0-5" ng-click="toggleOption('showTrashed')" ng-show="showTrashed === true && inTrash === false" translate translate-context="Action">Hide trashed messages</button>
                <button type="button" class="link ml0-5" ng-click="toggleOption('showNonTrashed')" ng-show="showNonTrashed === true && inTrash === true" translate translate-context="Action">Hide non-trashed messages</button>
            </p>
        </div>
    </header>
    <div id="pm_thread" class="no-outline" tabindex="-1">
        <message
            id="message{{ $index }}"
            data-model="message"
            data-marked="markedMessage"
            data-last="$last"
            data-index="$index"
            ng-repeat="message in messages | filter: filterMessages:showTrashed:showNonTrashed track by message.ID"
        ></message>
    </div>

</section>
